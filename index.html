<!DOCTYPE html>
<html lang="vi">
<head>
<meta charset="UTF-8" />
<title>TrÃ² chÆ¡i: SiÃªu thá»‹ thÃ´ng minh</title>
<style>
  * { box-sizing: border-box; }
  body {font-family: system-ui, sans-serif;margin: 0;padding: 20px;background: #fdf7ff;overflow:hidden;}

  h1{text-align:center;margin-top:0;}
  .wrapper{display:flex;gap:20px;margin-top:10px;flex-wrap:wrap;}

  .basket{
    flex:1 1 260px;border:2px dashed #ffb3c6;border-radius:15px;
    padding:15px;background:#fff5fa;min-height:320px;
  }
  .basket h2{text-align:center;margin-top:0;}
  .items-grid{display:flex;flex-wrap:wrap;gap:8px;justify-content:center;}

  .item{
    background:#ffe3f3;padding:6px 10px;border-radius:20px;
    border:1px solid #f2a4ce;cursor:grab;font-size:14px;
    user-select:none;text-align:center;min-width:90px;
  }
  .item.placed{opacity:.85;cursor:default;}

  .supermarket{
    flex:2 1 380px;border-radius:15px;padding:15px;background:#fff;
    box-shadow:0 0 6px rgba(0,0,0,0.08);
  }

  .supermarket-title{text-align:center;margin-bottom:10px;font-weight:600;}
  .zones{display:grid;grid-template-columns:repeat(2,minmax(160px,1fr));gap:12px;}

  .zone{
    border-radius:14px;padding:8px;min-height:120px;
    position:relative;border:2px dashed rgba(0,0,0,0.18);
  }

  .zone-header{
    display:inline-block;padding:4px 10px;border-radius:14px;
    font-size:13px;font-weight:600;background:#ffeaa7;margin-bottom:4px;
  }

  .zone[data-accept="vegetables"]{background:#e7fff2;}
  .zone[data-accept="bakery"]{background:#ffe6f2;}
  .zone[data-accept="drinks"]{background:#e4f1ff;}
  .zone[data-accept="homecare"]{background:#efe4ff;}

  .zone-icon{
    position:absolute;font-size:40px;opacity:.18;
    right:8px;bottom:4px;pointer-events:none;
  }
  .zone-items{display:flex;flex-wrap:wrap;gap:6px;margin-top:4px;}

  .dragging{opacity:.6;}
  .zone.over{border-style:solid;}
  .shake{animation:shake .25s;}

  @keyframes shake{
    0%{transform:translateX(0);}
    25%{transform:translateX(-4px);}
    50%{transform:translateX(4px);}
    75%{transform:translateX(-4px);}
    100%{transform:translateX(0);}
  }

  .status-bar{
    margin-top:15px;display:flex;justify-content:center;
    gap:15px;align-items:center;flex-wrap:wrap;
  }
  .message{font-weight:600;text-align:center;}

  .btn{
    padding:6px 12px;border-radius:20px;border:none;cursor:pointer;
    background:#ffb3c6;font-weight:600;
  }
  .btn:hover{filter:brightness(.96);}
  .success{color:#16a34a;font-size:18px;}

  /* FIREWORK CANVAS */
  #fireworks {
    position: fixed;
    width: 100vw;
    height: 100vh;
    top:0;
    left:0;
    pointer-events:none;
    display:none;
  }
</style>
</head>
<body>

<canvas id="fireworks"></canvas>

<h1>ğŸ›’ TrÃ² chÆ¡i: SIÃŠU THá»Š THÃ”NG MINH</h1>
<p style="text-align:center">
  KÃ©o cÃ¡c máº·t hÃ ng tá»« <b>Giá» hÃ ng</b> sang Ä‘Ãºng khu <b>Vegetables / Bakery / Drinks / Home care</b>.
</p>

<div class="wrapper">
  <section class="basket">
    <h2>ğŸ§º GIá» HÃ€NG (20 váº­t pháº©m)</h2>
    <div class="items-grid" id="basket">

      <!-- Vegetables -->
      <div class="item" draggable="true" data-category="vegetables">ğŸ¥• CÃ  rá»‘t</div>
      <div class="item" draggable="true" data-category="vegetables">ğŸ¥” Khoai tÃ¢y</div>
      <div class="item" draggable="true" data-category="vegetables">ğŸ¥¬ Rau cáº£i</div>
      <div class="item" draggable="true" data-category="vegetables">ğŸ§… HÃ nh tÃ¢y</div>
      <div class="item" draggable="true" data-category="vegetables">ğŸ¥’ DÆ°a leo</div>

      <!-- Bakery -->
      <div class="item" draggable="true" data-category="bakery">ğŸ BÃ¡nh mÃ¬</div>
      <div class="item" draggable="true" data-category="bakery">ğŸ« Chocolate</div>
      <div class="item" draggable="true" data-category="bakery">ğŸª BÃ¡nh quy</div>
      <div class="item" draggable="true" data-category="bakery">ğŸ§ Cupcake</div>
      <div class="item" draggable="true" data-category="bakery">ğŸ¥ BÃ¡nh croissant</div>

      <!-- Drinks -->
      <div class="item" draggable="true" data-category="drinks">ğŸ¥› Sá»¯a há»™p</div>
      <div class="item" draggable="true" data-category="drinks">ğŸ¥¤ NÆ°á»›c ngá»t</div>
      <div class="item" draggable="true" data-category="drinks">ğŸ§ƒ NÆ°á»›c trÃ¡i cÃ¢y</div>
      <div class="item" draggable="true" data-category="drinks">ğŸµ TrÃ  sá»¯a</div>
      <div class="item" draggable="true" data-category="drinks">ğŸ¶ Sá»¯a chua uá»‘ng</div>

      <!-- Homecare -->
      <div class="item" draggable="true" data-category="homecare">ğŸ§» Giáº¥y vá»‡ sinh</div>
      <div class="item" draggable="true" data-category="homecare">ğŸ§¼ XÃ  phÃ²ng</div>
      <div class="item" draggable="true" data-category="homecare">ğŸª¥ BÃ n cháº£i</div>
      <div class="item" draggable="true" data-category="homecare">ğŸ§½ Miáº¿ng rá»­a chÃ©n</div>
      <div class="item" draggable="true" data-category="homecare">ğŸ› TÃºi rÃ¡c</div>

    </div>
  </section>

  <!-- Zones -->
  <section class="supermarket">
    <h2 class="supermarket-title">ğŸª SÆ  Äá»’ SIÃŠU THá»Š</h2>
    <div class="zones">

      <div class="zone" data-accept="vegetables">
        <span class="zone-header">Vegetables â€“ Rau cá»§</span><span class="zone-icon">ğŸ¥¦</span>
        <div class="zone-items"></div>
      </div>

      <div class="zone" data-accept="bakery">
        <span class="zone-header">Bakery â€“ BÃ¡nh & Ä‘á»“ khÃ´</span><span class="zone-icon">ğŸ</span>
        <div class="zone-items"></div>
      </div>

      <div class="zone" data-accept="drinks">
        <span class="zone-header">Drinks â€“ Äá»“ uá»‘ng</span><span class="zone-icon">ğŸ¥¤</span>
        <div class="zone-items"></div>
      </div>

      <div class="zone" data-accept="homecare">
        <span class="zone-header">Home care â€“ Äá»“ gia dá»¥ng</span><span class="zone-icon">ğŸ§¼</span>
        <div class="zone-items"></div>
      </div>

    </div>
  </section>
</div>

<div class="status-bar">
  <span class="message" id="status">ÄÃ£ sáº¯p xáº¿p: 0 / 20</span>
  <button class="btn" id="resetBtn">ğŸ” ChÆ¡i láº¡i</button>
</div>

<!-- Ã‚m thanh ting Ä‘Ãºng Ä‘Ã¡p Ã¡n (Base64) -->
<audio id="dingSound">
  <source src="data:audio/mp3;base64,//uQxAAAAAAAAAAAAAAAAAAAAAAAWGluZwAAAA8AAAACAAACcQCA///////..." type="audio/mp3">
</audio>

<script>
/* --------------------------
   FIREWORK SYSTEM
--------------------------- */
let fwCanvas = document.getElementById("fireworks");
let ctx = fwCanvas.getContext("2d");
let fireworks = [];
let interval;
function resizeFW(){
  fwCanvas.width = innerWidth;
  fwCanvas.height = innerHeight;
}
resizeFW();
addEventListener("resize",resizeFW);

function launchFirework(){
  for(let i=0;i<20;i++){
    fireworks.push({
      x: innerWidth/2,
      y: innerHeight/2,
      vx:(Math.random()*6)-3,
      vy:(Math.random()*6)-3,
      life: 60,
      color:`hsl(${Math.random()*360},100%,60%)`
    });
  }
}

function runFireworks(){
  ctx.clearRect(0,0,fwCanvas.width,fwCanvas.height);
  fireworks.forEach((p,i)=>{
    p.x+=p.vx;
    p.y+=p.vy;
    p.life--;
    ctx.fillStyle=p.color;
    ctx.beginPath();
    ctx.arc(p.x,p.y,4,0,Math.PI*2);
    ctx.fill();
  });
  fireworks=fireworks.filter(p=>p.life>0);
  if(fireworks.length){
    requestAnimationFrame(runFireworks);
  } else {
    fwCanvas.style.display="none";
  }
}

/* --------------------------
   GAME CODE
--------------------------- */
const basket = document.getElementById("basket");
const statusText = document.getElementById("status");
const resetBtn = document.getElementById("resetBtn");
const zones = document.querySelectorAll(".zone");
let items = document.querySelectorAll(".item");
const total = items.length;
let correctCount = 0;

const ding = document.getElementById("dingSound");

function updateStatus(){
  statusText.innerHTML = `ÄÃ£ sáº¯p xáº¿p: ${correctCount} / ${total}`;
  if(correctCount === total){
    // hiá»‡u á»©ng hoÃ n thÃ nh
    statusText.classList.add("success");
    statusText.innerHTML += `<br>âœ¨ Tuyá»‡t vá»i! Báº¡n lÃ  khÃ¡ch hÃ ng siÃªu thÃ´ng minh!
      <br><b>Máº¬T MÃƒ THá»¨ 3: "Tá»T"</b>`;

    // cháº¡y phÃ¡o hoa
    fwCanvas.style.display="block";
    launchFirework();
    runFireworks();
  } else {
    statusText.classList.remove("success");
  }
}

function addItemEvents(item){
  item.addEventListener("dragstart", ()=>item.classList.add("dragging"));
  item.addEventListener("dragend", ()=>item.classList.remove("dragging"));
}

items.forEach(addItemEvents);

zones.forEach(zone=>{
  zone.addEventListener("dragover", e=>{
    e.preventDefault();
    zone.classList.add("over");
  });

  zone.addEventListener("dragleave", ()=>zone.classList.remove("over"));

  zone.addEventListener("drop", ()=>{
    zone.classList.remove("over");

    const dragging = document.querySelector(".item.dragging");
    if(!dragging) return;

    if(dragging.dataset.category === zone.dataset.accept){
      if(!dragging.classList.contains("placed")){
        correctCount++;
      }
      dragging.classList.add("placed");
      dragging.setAttribute("draggable","false");

      ding.currentTime = 0;
      ding.play();

      zone.querySelector(".zone-items").appendChild(dragging);
      updateStatus();
    } else {
      dragging.classList.add("shake");
      setTimeout(()=>dragging.classList.remove("shake"),250);
      basket.appendChild(dragging);
    }
  });
});

resetBtn.addEventListener("click", ()=>{
  correctCount = 0;

  items=document.querySelectorAll(".item");
  items.forEach(item=>{
    item.classList.remove("placed");
    item.setAttribute("draggable","true");
    basket.appendChild(item);
    addItemEvents(item);
  });

  statusText.classList.remove("success");
  fwCanvas.style.display="none";
  fireworks=[];
  updateStatus();
});

updateStatus();
</script>

</body>
</html>
